# 开发者日志

**2021.04.05**

完成了wireframe rendering以及填充三角形（没有背面剔除等流程，明天加）。

**2021.04.06**

写了背面剔除，以及简单的光照计算，由于TinyRenderer教程中只支持导入.obj格式，但现在很多文件都是.fbx格式（超想导入DOTA2英雄模型！但是DOTA2模型都是fbx文件），因此想实现导入fbx文件的功能，于是就查到了FBXSDK，倒腾了一下午才安装配置完。明天把FBXSDK基本用法搞懂，能从fbx提取出vertex的信息（坐标，uv坐标等等）。

**2021.04.07**

弄懂了怎么用FBXSDK提取出顶点的坐标、UV，以及面的索引（记住fbx中两个重要的概念：control point和polygon vertex），但还没实现，明天先实现从FBX文件中提取出顶点坐标和索引，并用wireframe看看是不是正确的。然后再实现UV、法向量。

**2021.04.08**

看到fbx文件中还有蒙皮骨骼动画信息，就去了解了一下蒙皮骨骼动画，决定翻译一篇相关的英文文章，加深一下对蒙皮骨骼动画的理解，然后再继续对动画信息的提取。要学习的知识还是挺多的（慢慢填坑），今天翻译了一半，明天继续。

**2021.04.09**

蒙皮骨骼动画的文章翻译完了

原文链接:[https://www.gamedev.net/tutorials/graphics-programming-and-theory/skinned-mesh-animation-using-matrices-r3577/](https://www.gamedev.net/tutorials/graphics-programming-and-theory/skinned-mesh-animation-using-matrices-r3577/)

译文链接：[https://blog.csdn.net/qq_38804299/article/details/115558780?spm=1001.2014.3001.5501](https://blog.csdn.net/qq_38804299/article/details/115558780?spm=1001.2014.3001.5501)

对蒙皮骨骼动画有了基本的了解，明天开始继续实现导入FBX中的顶点信息。

**2021.04.12**

今天遇到一个坑，看到的技术文章里默认fbx文件中保存的都是三角形单元，但是我用到的fbx文件中有很多个多边形单元，然后就决定把多边形拆成三角形单元读取。同时也了解到fbx可以保存的贴图文件种类非常的多，最后决定只读取Diffuse和normal贴图。读取texture的同时，还要注意从fbx文件中读取对应的texture的文件名。今天写了一半决定去下载UE4的源码，想参考一下fbx文件导入部分，但是操作过程中不小心把VS卸载了（太草了）。今天只完成了顶点的position和面的索引读取，明天继续完成Diffuse和normal贴图读取，以及顶点法线、tangent等信息的提取。

**2021.04.14**

UE4生成搞定，简单看了看fbx导入部分，发现有很多我不需要的信息。自己还是想法太多，还是先从简单的做起，现在只从fbx文件中导出静态模型的信息就行了。在测试顶点的position和面的索引导入是否正确时，才想起来之前用的obj格式文件都是标准化后的坐标，现在用fbx得自己做一次MVP变换。明天把MVP变换做一下，写出三个函数get_ModelTransformMatrix()/get_ViewTransformMatrix()/get_ProjectionTransformMatrix().

**2021.04.16**

写完了MVP变换以及视口变换，用随机颜色测试了一下读取的数据，才发现读出来的只是模型中不受骨骼影响的mesh（面部、底部）。看来还是绕不开骨骼部分，明天研究怎么提取fbx中attributetype为skeleton的节点。

**2021.04.18**

暂时跳过了skeleton部分，写好了读取Diffuse texture部分，并且写完了对应的纹理映射，并且加入了MSAA，但是家了MSAA之后出现了边界黑线的情况，在一番查询后发现，这是因为在使用MSAA的时候我没有用同样精度的子采样点去进行深度测试，这样就导致了某些地方只用了像素点更新深度，从而引起边界只由其中一个三角形的深度进行更新的情况。因此需要增大zBuffer，并且同时采用相同大小的colorBuffer，通过colorBuffer混合得出最终的像素点颜色。参考链接：[http://games-cn.org/forums/topic/%E3%80%90%E6%80%BB%E7%BB%93%E3%80%91msaa%E4%B8%AD%E9%BB%91%E7%BA%BF%E9%97%AE%E9%A2%98%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8E%9F%E5%9B%A0%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/](http://games-cn.org/forums/topic/%E3%80%90%E6%80%BB%E7%BB%93%E3%80%91msaa%E4%B8%AD%E9%BB%91%E7%BA%BF%E9%97%AE%E9%A2%98%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8E%9F%E5%9B%A0%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/)
今天只写到增大zBuffer部分，明天继续完成colorBuffer部分。
